<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Serpent  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Serpent  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Serpent Docs</a> (30% documented)</p>
        <p class="header-right"><a href="https://github.com/mariusc/Serpent"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Serpent Reference</a>
        <img id="carat" src="img/carat.png" />
        Serpent  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BridgingBox.html">BridgingBox</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Alamofire.DataRequest.html">Alamofire.DataRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Cashier.html">Cashier</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Color.html">Color</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Date.html">Date</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/RawRepresentable.html">RawRepresentable</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Sequence.html">Sequence</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/URL.html">URL</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_R_S_11KeymappablerFTRGSqx_T8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_R_S_11KeymappablerFTRxT8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_RxS_16HexInitializable_S_11KeymappablerFTRGSqx_T8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_RxS_16HexInitializable_S_11KeymappablerFTRxT8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_RxS_19StringInitializable_S_11KeymappablerFTRGSqx_T8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_RxS_19StringInitializable_S_11KeymappablerFTRxT8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_RxS_9Decodable_S_11KeymappablerFTRGSqx_T8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_RxS_9Decodable_S_11KeymappablerFTRxT8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_Rxs16RawRepresentable_S_11KeymappablerFTRGSax_T8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_Rxs16RawRepresentable_S_11KeymappablerFTRGSqGSax__T8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_Rxs16RawRepresentable_S_11KeymappablerFTRGSqx_T8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_Rxs16RawRepresentable_S_11KeymappablerFTRxT8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_Rxs8Sequence_S_11KeymappableWx8Iterator7Element_S_9DecodablerFTRGSqx_T8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeu0_Rxs8Sequence_S_11KeymappableWx8Iterator7Element_S_9DecodablerFTRxT8instanceq_4dictGSqCSo12NSDictionary_3keySS__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeuRxS_19StringInitializablerFTT4dictCSo19NSMutableDictionary3keySS_GSqx__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeuRxS_9EncodablerFTT4dictCSo19NSMutableDictionary3keySS_GSqx__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeuRxs16RawRepresentablerFTT4dictCSo19NSMutableDictionary3keySS_GSqx__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeuRxs8SequenceWx8Iterator7Element_S_9EncodablerFTT4dictCSo19NSMutableDictionary3keySS_GSqx__T_">&lt;==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F7Serpentoi3leeurFTT4dictCSo19NSMutableDictionary3keySS_GSqx__T_">&lt;==(_:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/Decodable.html">Decodable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Encodable.html">Encodable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/HexInitializable.html">HexInitializable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Keymappable.html">Keymappable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:P7Serpent12Serializable">Serializable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StringInitializable.html">StringInitializable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Parser.html">Parser</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p align="center"><img src="./Serpent_icon.png?raw=true" alt="Serpent"/></p>

<p><a href="https://travis-ci.org/nodes-ios/Serpent"><img src="https://img.shields.io/travis/nodes-ios/Serpent.svg" alt="Travis"></a>
<a href="https://codecov.io/github/nodes-ios/Serpent"><img src="https://img.shields.io/codecov/c/github/nodes-ios/Serpent.svg" alt="Codecov"></a>
<a href="https://codebeat.co/projects/github-com-nodes-ios-serpent"><img src="https://codebeat.co/badges/bf41edec-511c-405d-9036-a7253492c118" alt="codebeat badge"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/carthage-compatible-4BC51D.svg?style=flat" alt="Carthage Compatible"></a>
<a href="https://cocoapods.org/pods/Serpent"><img src="https://img.shields.io/cocoapods/v/Serpent.svg" alt="CocoaPods"></a><br>
<img src="https://img.shields.io/badge/platforms-iOS%20%7C%20macOS%20%7C%20tvOS%20%7C%20watchOS%20-lightgrey.svg" alt="Plaforms">
<a href="https://github.com/nodes-ios/Serpent/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="GitHub license"></a></p>

<p><strong>Serpent</strong> <em>(previously known as Serializable)</em> is a framework made for creating model objects or structs that can be easily serialized and deserialized from/to JSON. It&rsquo;s easily expandable and handles all common data types used when consuming a REST API, as well as recursive parsing of custom objects. Designed for use with Alamofire.</p>

<p>It&rsquo;s designed to be used together with our helper app, the <a href="https://github.com/nodes-ios/ModelBoiler"><img src="http://i.imgur.com/V5UzMVk.png" alt="ModelBoiler"></a> <a href="https://github.com/nodes-ios/ModelBoiler">Model Boiler</a>, making model creation a breeze.</p>

<p>Serpent is implemented using protocol extensions and static typing.</p>
<a href='#table-of-contents' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='table-of-contents'>üìë Table of Contents</h2>

<ul>
<li><a href="#-why-serpent">üêç Why Serpent?</a></li>
<li><a href="#-requirements">üìù Requirements</a></li>
<li><a href="#-installation">üì¶ Installation</a>

<ul>
<li><a href="#carthage">Carthage</a></li>
<li><a href="#cocoapods">CocoaPods</a></li>
<li><a href="#swift-package-manager">Swift Package Manager</a></li>
</ul></li>
<li><a href="#-setup">üîß Setup</a></li>
<li><a href="#-usage">üíª Usage</a>

<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#using-serpent-models">Using Serpent models</a></li>
<li><a href="#more-complex-examples">More complex examples</a></li>
<li><a href="#using-with-alamofire">Using with Alamofire</a></li>
<li><a href="#date-parsing">Date parsing</a></li>
</ul></li>
<li><a href="#-credits">üë• Credits</a></li>
<li><a href="#-license">üìÑ License</a></li>
</ul>
<a href='#why-serpent' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='why-serpent'>üêç Why Serpent?</h2>

<p>There are plenty of other Encoding and Decoding frameworks available. Why should you use Serpent?</p>

<ul>
<li><a href="https://github.com/nodes-ios/SerpentPerformanceComparison">Performance</a>. Serpent is fast, up to 4x faster than similar frameworks.</li>
<li><a href="https://github.com/nodes-ios/SerpentPerformanceComparison#-feature-comparison">Features</a>. Serpent can parse anything you throw at it. Nested objects, Enums, URLs, UIColor, you name it!</li>
<li><a href="https://github.com/nodes-ios/ModelBoiler"><img src="http://i.imgur.com/V5UzMVk.png" alt="ModelBoiler"></a> <a href="https://github.com/nodes-ios/ModelBoiler">Model Boiler</a>. Every framework of this kind requires tedious boilerplate code that takes forever to write.  <a href="https://github.com/nodes-ios/ModelBoiler"><img src="http://i.imgur.com/V5UzMVk.png" alt="ModelBoiler"></a> <a href="https://github.com/nodes-ios/ModelBoiler">Model Boiler</a> generates it for you instantly.</li>
<li><a href="">Alamofire Integration</a>. Using the included Alamofire extensions makes implementing an API call returning parsed model data as simple as doing a one-liner!</li>
<li><a href="">Expandability</a>. Parsing into other datatypes can easily be added.</li>
<li><a href="">Persisting</a>. Combined with our caching framework <a href="https://github.com/nodes-ios/Cashier">Cashier</a>, Serpent objects can be very easily persisted to disk.</li>
<li><a href = "https://github.com/nodes-ios/SerpentXcodeFileTemplate"><img src = "https://raw.githubusercontent.com/nodes-ios/SerpentXcodeFileTemplate/master/Serpent/Serpent%20Model.xctemplate/TemplateIcon.png" height = 25> Serpent Xcode File Template </a> makes it easier to create the model files in Xcode.</li>
</ul>
<a href='#requirements' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='requirements'>üìù Requirements</h2>

<ul>
<li>iOS 8.0+ / macOS 10.10+ / tvOS 9.0+ / watchOS 2.0+</li>
<li>Swift 3.0+<br>
<em>(Swift 2.2 &amp; Swift 2.3 supported in older versions)</em></li>
</ul>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>üì¶ Installation</h2>
<a href='#carthage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='carthage'>Carthage</h3>
<pre class="highlight shell"><code>github <span class="s2">"nodes-ios/Serpent"</span> ~&gt; 1.0
</code></pre>

<blockquote>
<p>Last versions compatible with lower Swift versions:  </p>

<p><strong>Swift 2.3</strong><br>
<code>github &quot;nodes-ios/Serpent&quot; == 0.13.2</code></p>

<p><strong>Swift 2.2</strong><br>
<code>github &quot;nodes-ios/Serpent&quot; == 0.11.2</code></p>

<p><strong>NOTE:</strong> Serpent was previously known as <strong>Serializable</strong>.</p>
</blockquote>
<a href='#cocoapods' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='cocoapods'>CocoaPods</h3>

<p>Choose one of the following, add it to your <code>Podfile</code> and run <code>pod install</code>:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'Serpent'</span><span class="p">,</span> <span class="s1">'~&gt; 1.0'</span> <span class="c1"># Just core</span>
<span class="n">pod</span> <span class="s1">'Serpent/Extensions'</span><span class="p">,</span> <span class="s1">'~&gt; 1.0'</span> <span class="c1"># Includes core and all extensions</span>
<span class="n">pod</span> <span class="s1">'Serpent/AlamofireExtension'</span><span class="p">,</span> <span class="s1">'~&gt; 1.0'</span> <span class="c1"># Includes core and Alamofire extension</span>
<span class="n">pod</span> <span class="s1">'Serpent/CashierExtension'</span><span class="p">,</span> <span class="s1">'~&gt; 1.0'</span> <span class="c1"># Includes core and Cashier extension</span>
</code></pre>

<blockquote>
<p><strong>NOTE:</strong> CocoaPods only supports Serpent using Swift version 3.0 and higher.</p>
</blockquote>
<a href='#swift-package-manager' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='swift-package-manager'>Swift Package Manager</h3>

<p>To use Serpent as a <a href="https://swift.org/package-manager/">Swift Package Manager</a> package just add the following to your <code>Package.swift</code> file.  </p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
    <span class="nv">name</span><span class="p">:</span> <span class="s">"YourPackage"</span><span class="p">,</span>
    <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="kt">Package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/nodes-ios/Serpent.git"</span><span class="p">,</span> <span class="nv">majorVersion</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre>
<a href='#setup' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='setup'>üîß Setup</h2>

<p>We <strong>highly</strong> recommend you use our <a href="https://github.com/nodes-ios/ModelBoiler"><img src="http://i.imgur.com/V5UzMVk.png" alt="ModelBoiler"></a> <a href="https://github.com/nodes-ios/ModelBoiler">Model Boiler</a> to assist with generating the code needed to conform to Serpent. Instructions for installation and usage can be found at the <a href="https://github.com/nodes-ios/ModelBoiler">Model Boiler GitHub repository</a>.</p>
<a href='#usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='usage'>üíª Usage</h2>
<a href='#getting-started' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='getting-started'>Getting started</h3>

<p>Serpent supports all primitive types, <code>enum</code>, <code>URL</code>, <code>Date</code>, <code>UIColor</code>, other <code>Serpent</code> model, and <code>Array</code> of all of the aforementioned types. Your variable declarations can have a default value or be optional.</p>

<p>Primitive types do not need to have an explicit type, if Swift is able to infer it normally. <code>var name: String = &quot;&quot;</code> works just as well as <code>var name = &quot;&quot;</code>. Optionals will of course need an explicit type.</p>

<blockquote>
<p><strong>NOTE:</strong> Enums you create must conform to <code>RawRepresentable</code>, meaning they must have an explicit type. Otherwise, the parser won&rsquo;t know what to do with the incoming data it receives.</p>
</blockquote>
<a href='#create-your-model-struct-or-class' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='create-your-model-struct-or-class'>Create your model struct or class:</h4>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Foo</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">var</span> <span class="nv">name</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">var</span> <span class="nv">address</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p><strong>NOTE:</strong> Classes must be marked <code>final</code>.</p>
</blockquote>
<a href='#add-the-required-methods-for-code-encodable-code-and-code-decodable-code' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='add-the-required-methods-for-code-encodable-code-and-code-decodable-code'>Add the required methods for <code>Encodable</code> and <code>Decodable</code>:</h4>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Foo</span><span class="p">:</span> <span class="kt">Serializable</span> <span class="p">{</span>
    <span class="nf">init</span><span class="p">(</span><span class="nv">dictionary</span><span class="p">:</span> <span class="kt">NSDictionary</span><span class="p">?)</span> <span class="p">{</span>
        <span class="n">id</span>      <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"id"</span><span class="p">)</span>
        <span class="n">name</span>    <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>
        <span class="n">address</span> <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"address"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">encodableRepresentation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">NSCoding</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">dict</span> <span class="o">=</span> <span class="kt">NSMutableDictionary</span><span class="p">()</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"id"</span><span class="p">)</span>      <span class="o">&lt;==</span> <span class="nf">id</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>    <span class="o">&lt;==</span> <span class="nf">name</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"address"</span><span class="p">)</span> <span class="o">&lt;==</span> <span class="n">address</span>
        <span class="k">return</span> <span class="n">dict</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p><strong>NOTE:</strong> You can add conformance to <code>Serializable</code> which is a type alias for both <code>Encodable</code> and <code>Decodable</code>.</p>
</blockquote>

<p>And thats it! If you&rsquo;re using the <a href="https://github.com/nodes-ios/ModelBoiler"><img src="http://i.imgur.com/V5UzMVk.png" alt="ModelBoiler"></a> <a href="https://github.com/nodes-ios/ModelBoiler">Model Boiler</a>, this extension will be generated for you, so that you don&rsquo;t need to type it all out for every model you have.</p>
<a href='#using-serpent-models' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='using-serpent-models'>Using Serpent models</h3>

<p>New instances of your model can be created with a dictionary, e.g. from parsed JSON.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">dictionary</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">JSONSerialization</span><span class="o">.</span><span class="nf">jsonObject</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">someData</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="n">allowFragments</span><span class="p">)</span> <span class="k">as?</span> <span class="kt">NSDictionary</span>
<span class="k">let</span> <span class="nv">newModel</span> <span class="o">=</span> <span class="kt">Foo</span><span class="p">(</span><span class="nv">dictionary</span><span class="p">:</span> <span class="n">dictionary</span><span class="p">)</span>
</code></pre>

<p>You can generate a dictionary version of your model by calling <code>encodableRepresentation()</code>:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">encodedDictionary</span> <span class="o">=</span> <span class="n">newModel</span><span class="o">.</span><span class="nf">encodableRepresentation</span><span class="p">()</span>
</code></pre>
<a href='#more-complex-examples' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='more-complex-examples'>More complex examples</h3>

<p>In this example, we have two models, Student and School.</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Student</span> <span class="p">{</span>
    <span class="kd">enum</span> <span class="kt">Gender</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">male</span> <span class="o">=</span> <span class="s">"male"</span>
        <span class="k">case</span> <span class="n">female</span> <span class="o">=</span> <span class="s">"female"</span>
        <span class="k">case</span> <span class="n">unspecified</span> <span class="o">=</span> <span class="s">"unspecified"</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">name</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">var</span> <span class="nv">age</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">var</span> <span class="nv">gender</span><span class="p">:</span> <span class="kt">Gender</span><span class="p">?</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">School</span> <span class="p">{</span>
    <span class="kd">enum</span> <span class="kt">Sport</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">football</span>
        <span class="k">case</span> <span class="n">basketball</span>
        <span class="k">case</span> <span class="n">tennis</span>
        <span class="k">case</span> <span class="n">swimming</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">name</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">var</span> <span class="nv">location</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">var</span> <span class="nv">website</span><span class="p">:</span> <span class="kt">URL</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">students</span><span class="p">:</span> <span class="p">[</span><span class="kt">Student</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">var</span> <span class="nv">sports</span><span class="p">:</span> <span class="p">[</span><span class="kt">Sport</span><span class="p">]?</span>
<span class="p">}</span>
</code></pre>

<p>You can get as complicated as you like, and the syntax will always remain the same. The extensions will be:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Student</span><span class="p">:</span> <span class="kt">Serializable</span> <span class="p">{</span>
    <span class="nf">init</span><span class="p">(</span><span class="nv">dictionary</span><span class="p">:</span> <span class="kt">NSDictionary</span><span class="p">?)</span> <span class="p">{</span>
        <span class="n">name</span>   <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>
        <span class="n">age</span>    <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"age"</span><span class="p">)</span>
        <span class="n">gender</span> <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"gender"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">encodableRepresentation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">NSCoding</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">dict</span> <span class="o">=</span> <span class="kt">NSMutableDictionary</span><span class="p">()</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>   <span class="o">&lt;==</span> <span class="nf">name</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"age"</span><span class="p">)</span>    <span class="o">&lt;==</span> <span class="nf">age</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"gender"</span><span class="p">)</span> <span class="o">&lt;==</span> <span class="n">gender</span>
        <span class="k">return</span> <span class="n">dict</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">School</span><span class="p">:</span> <span class="kt">Serializable</span> <span class="p">{</span>
    <span class="nf">init</span><span class="p">(</span><span class="nv">dictionary</span><span class="p">:</span> <span class="kt">NSDictionary</span><span class="p">?)</span> <span class="p">{</span>
        <span class="n">name</span>     <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>
        <span class="n">location</span> <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"location"</span><span class="p">)</span>
        <span class="n">website</span>  <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"website"</span><span class="p">)</span>
        <span class="n">students</span> <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"students"</span><span class="p">)</span>
        <span class="n">sports</span>   <span class="o">&lt;==</span> <span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">"sports"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">encodableRepresentation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">NSCoding</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">dict</span> <span class="o">=</span> <span class="kt">NSMutableDictionary</span><span class="p">()</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>     <span class="o">&lt;==</span> <span class="nf">name</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"location"</span><span class="p">)</span> <span class="o">&lt;==</span> <span class="nf">location</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"website"</span><span class="p">)</span>  <span class="o">&lt;==</span> <span class="nf">website</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"students"</span><span class="p">)</span> <span class="o">&lt;==</span> <span class="nf">students</span>
        <span class="p">(</span><span class="n">dict</span><span class="p">,</span> <span class="s">"sports"</span><span class="p">)</span>   <span class="o">&lt;==</span> <span class="n">sports</span>
        <span class="k">return</span> <span class="n">dict</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Again, the <a href="https://github.com/nodes-ios/ModelBoiler"><img src="http://i.imgur.com/V5UzMVk.png" alt="ModelBoiler"></a> <a href="https://github.com/nodes-ios/ModelBoiler">Model Boiler</a> generates all of this code for you in less than a second!</p>
<a href='#using-with-alamofire' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='using-with-alamofire'>Using with Alamofire</h3>

<p>Serpent comes integrated with Alamofire out of the box, through an extension on Alamofire&rsquo;s <code>Request</code> construct, that adds the function <code>responseSerializable(completion:unwrapper)</code></p>

<p>The extension uses Alamofire&rsquo;s familiar <code>Response</code> type to hold the returned data, and uses its generic associated type to automatically parse the data.</p>

<p>Consider an endpoint returning a single <code>school</code> structure matching the struct from the example above. To implement the call, simply add a function to your shared connection manager or where ever you like to put it:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">requestSchool</span><span class="p">(</span><span class="nv">completion</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">DataResponse</span><span class="o">&lt;</span><span class="kt">School</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">request</span><span class="p">(</span><span class="s">"http://somewhere.com/school/1"</span><span class="p">,</span> <span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="k">get</span><span class="p">)</span><span class="o">.</span><span class="nf">responseSerializable</span><span class="p">(</span><span class="n">completion</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>In the consuming method you use it like this:</p>
<pre class="highlight swift"><code><span class="nf">requestSchool</span><span class="p">()</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">school</span><span class="p">):</span>
            <span class="c1">//Use your new school object!</span>

        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="c1">//Handle the error object, or check your Response for more detail</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>For an array of objects, use the same technique:</p>
<pre class="highlight swift"><code><span class="kd">static</span> <span class="kd">func</span> <span class="nf">requestStudents</span><span class="p">(</span><span class="nv">completion</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">DataResponse</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Student</span><span class="p">]</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">request</span><span class="p">(</span><span class="s">"http://somewhere.com/school/1/students"</span><span class="p">,</span> <span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="k">get</span><span class="p">)</span><span class="o">.</span><span class="nf">responseSerializable</span><span class="p">(</span><span class="n">completion</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>Some APIs wrap their data in containers. Use the <code>unwrapper</code> closure for that. Let&rsquo;s say your <code>/students</code> endpoint returns the data wrapped in a <code>students</code> object:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"students"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"..."</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"..."</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The <code>unwrapper</code> closure has 2 input arguments: The <code>sourceDictionary</code> (the JSON Response Dictionary) and the <code>expectedType</code> (the <em>type</em> of the target Serpent). Return the object that will serve as the input for the Serializable initializer.</p>
<pre class="highlight swift"><code><span class="kd">static</span> <span class="kd">func</span> <span class="nf">requestStudents</span><span class="p">(</span><span class="nv">completion</span><span class="p">:</span> <span class="p">(</span><span class="kt">DataResponse</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Student</span><span class="p">]</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">request</span><span class="p">(</span><span class="s">"http://somewhere.com/school/1/students"</span><span class="p">,</span> <span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="k">get</span><span class="p">)</span><span class="o">.</span><span class="nf">responseSerializable</span><span class="p">(</span><span class="n">completion</span><span class="p">,</span> <span class="nv">unwrapper</span><span class="p">:</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="mi">0</span><span class="p">[</span><span class="s">"students"</span><span class="p">]</span> <span class="p">})</span>
<span class="p">}</span>
</code></pre>

<p>If you need to unwrap the response data in every call, you can install a default unwrapper using</p>
<pre class="highlight swift"><code><span class="kt">Parser</span><span class="o">.</span><span class="n">defaultWrapper</span> <span class="o">=</span> <span class="p">{</span> <span class="n">sourceDictionary</span><span class="p">,</span> <span class="n">expectedType</span> <span class="k">in</span> 
    <span class="c1">// You custom unwrapper here... </span>
    <span class="k">return</span> <span class="n">sourceDictionary</span>
<span class="p">}</span>
</code></pre>

<p>The <code>expectedType</code> can be used to dynamically determine the key based on the type name using reflection. This is especially useful when handling paginated data.</p>

<p>See <a href="https://github.com/nodes-ios/Nodes">here</a> for an example on how we use this in our projects at Nodes.</p>

<p><strong><em>NOTE:</em></strong> <code>responseSerializable</code> Internally calls <code>validate().responseJSON()</code> on the request, so you don&rsquo;t have to do that.</p>
<a href='#date-parsing' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='date-parsing'>Date parsing</h3>

<p>Serpent can create <code>Date</code> objects from the date strings in the JSON. By default, Serpent can parse the date strings from the following formats: <code>yyyy-MM-dd&#39;T&#39;HH:mm:ssZZZZZ</code>, <code>yyyy-MM-dd&#39;T&#39;HH:mm:ss</code>, <code>yyyy-MM-dd</code>. If you need to parse other date formats, you can do it by adding this line to your code (for example, in <code>AppDelegate</code>&lsquo;s <code>didFinishLaunchingWithOptions:</code>:</p>
<pre class="highlight swift"><code><span class="kt">Date</span><span class="o">.</span><span class="n">customDateFormats</span> <span class="o">=</span> <span class="p">[</span><span class="s">"yyyyMMddHHmm"</span><span class="p">,</span> <span class="s">"yyyyMMdd"</span><span class="p">]</span>    <span class="c1">// add the custom date formats you need here</span>
</code></pre>

<p>The custom date formats won&rsquo;t replace the default ones, they will be still supported. </p>
<a href='#credits' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='credits'>üë• Credits</h2>

<p>Made with ‚ù§Ô∏è at <a href="http://nodesagency.com">Nodes</a>.</p>
<a href='#license' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='license'>üìÑ License</h2>

<p><strong>Serpent</strong> is available under the MIT license. See the <a href="https://github.com/nodes-ios/Serpent/blob/master/LICENSE">LICENSE</a> file for more info.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017 <a class="link" href="https://twitter.com/nodes_ios" target="_blank" rel="external">Nodes</a>. All rights reserved. (Last updated: 2017-03-16)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ‚ô™‚ô´ v0.7.4</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
